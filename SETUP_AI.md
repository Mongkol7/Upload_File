# AI Search & Feedback Setup Guide

This guide will help you set up the AI-powered search functionality and feedback form.

## Features Added

1. **AI-Powered Search**: Uses Google Gemini API to analyze images, videos, and documents for semantic search
2. **Feedback Form**: Round message box at bottom right corner that sends feedback directly to your email

## Setup Instructions

### 1. Get Google Gemini API Key (Free)

1. Go to [Google AI Studio](https://makersuite.google.com/app/apikey)
2. Sign in with your Google account
3. Click "Create API Key"
4. Copy your API key

**Note**: Google Gemini API has a generous free tier that should be sufficient for most use cases.

### 2. Configure Environment Variables

Add the following to your `.env` file in the root directory:

```env
# Google Gemini API Key for AI-powered search
GEMINI_API_KEY=your_gemini_api_key_here
```

If you don't have a `.env` file, create one in the root directory with all your existing environment variables plus the new `GEMINI_API_KEY`.

### 3. Verify Setup

1. Make sure your `.env` file contains the `GEMINI_API_KEY`
2. Restart your web server if needed
3. Visit your website and try the search function
4. You should see a small AI icon button next to the search box
5. Click it to enable/disable AI search

## How It Works

### AI-Powered Search

- **Regular Search**: Searches by filename (default behavior)
- **AI Search**: When enabled, uses Google Gemini to understand the meaning of your search query and find files based on content, not just filename
- Toggle between modes using the AI icon button next to the search box
- AI search is automatically used for queries longer than 2 characters when enabled

### Feedback Form

- Click the round message icon at the bottom right corner
- Fill in the form (name and email are optional)
- Click "Send Feedback"
- The message will be sent directly to: **thoeungsereymongkol@gmail.com**

## API Endpoints

The following API endpoints have been created:

- `api/ai-search.php` - Handles AI-powered semantic search
- `api/analyze-file.php` - Analyzes individual files (for future use)
- `api/send-feedback.php` - Sends feedback emails

## Troubleshooting

### AI Search Not Working

1. Check that `GEMINI_API_KEY` is set in your `.env` file
2. Verify the API key is valid by visiting [Google AI Studio](https://makersuite.google.com/app/apikey)
3. Check browser console for any error messages
4. Check PHP error logs for API errors

### Feedback Not Sending

1. Make sure PHP's `mail()` function is configured on your server
2. For local development (XAMPP), you may need to configure SMTP settings
3. Check PHP error logs for mail errors
4. Consider using a service like PHPMailer with SMTP for production

### For Production (Recommended)

For production environments, consider:

1. **Email Service**: Use PHPMailer with SMTP (Gmail, SendGrid, etc.) instead of PHP's `mail()` function
2. **API Security**: Add rate limiting and authentication to API endpoints
3. **Error Handling**: Implement better error logging and user feedback

## File Structure

New files created:

```
src/
  └── AIAnalyzer.php          # AI analysis service using Gemini API

api/
  ├── ai-search.php           # AI search endpoint
  ├── analyze-file.php        # File analysis endpoint
  └── send-feedback.php       # Feedback email endpoint

components/
  └── feedback-form.php       # Feedback form component

js/
  └── ai-search.js            # AI search JavaScript functionality
```

## Notes

- The AI search uses Google Gemini 1.5 Flash model (free tier)
- Image analysis processes the actual image content
- Video analysis uses thumbnails generated by Cloudinary
- Document analysis extracts text content when possible
- All AI processing happens server-side for security

